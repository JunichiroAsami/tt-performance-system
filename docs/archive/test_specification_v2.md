# テスト仕様書 v2.0

**プロジェクト名**: AI主導型 卓球パフォーマンス最大化システム  
**作成日**: 2026年1月3日  
**バージョン**: 2.0（実動作検証済み）

---

## 1. テスト方針

### 1.1 基本方針

**「実際に動作することを確認してからテストを設計する」**

従来のテストは「出力形式の確認」に留まっていたが、本仕様書では以下を重視する：

1. **実動作検証**: 実際の動画を入力し、実際に分析が完了するか
2. **品質検証**: 出力内容が卓球の専門知識として妥当か
3. **実用性検証**: 選手・コーチが実際に活用できるか

### 1.2 テストレベル

| レベル | 目的 | 検証方法 |
|:---|:---|:---|
| L1: 動作確認 | システムがエラーなく動作するか | 実際の動画で実行 |
| L2: 品質確認 | 出力内容が専門的に妥当か | 卓球用語・構造の検証 |
| L3: 実用性確認 | 選手が活用できるか | ユーザー評価 |

---

## 2. テストケース

### 2.1 L1: 動作確認テスト

#### TC-L1-01: 動画分析の実行

| 項目 | 内容 |
|:---|:---|
| **目的** | 動画ファイルを入力し、分析結果が出力されるか確認 |
| **入力** | 浅見選手の試合動画（MP4, 221秒, 56MB） |
| **期待結果** | JSON形式の分析結果が出力される |
| **合格基準** | - エラーなく完了<br>- 処理時間5分以内<br>- JSONとしてパース可能 |

#### TC-L1-02: 戦略生成の実行

| 項目 | 内容 |
|:---|:---|
| **目的** | 分析結果から戦略シートが生成されるか確認 |
| **入力** | TC-L1-01の分析結果 |
| **期待結果** | JSON形式の戦略シートが出力される |
| **合格基準** | - エラーなく完了<br>- JSONとしてパース可能 |

#### TC-L1-03: 練習計画生成の実行

| 項目 | 内容 |
|:---|:---|
| **目的** | 分析結果から練習計画が生成されるか確認 |
| **入力** | TC-L1-01の分析結果 |
| **期待結果** | JSON形式の練習計画が出力される |
| **合格基準** | - エラーなく完了<br>- JSONとしてパース可能 |

---

### 2.2 L2: 品質確認テスト

#### TC-L2-01: 分析結果の品質

| 項目 | 内容 |
|:---|:---|
| **目的** | 分析結果が卓球の専門知識として妥当か確認 |
| **検証項目** | 1. 基本情報（利き手、グリップ、プレースタイル）<br>2. 技術評価（5段階、各技術に対して）<br>3. 得点/失点パターン（各3つ以上） |
| **合格基準** | - 利き手: 右/左のいずれか<br>- グリップ: シェイク/ペンのいずれか<br>- 技術評価: 1-5の数値<br>- 得点パターン: 卓球用語を含む具体的な記述<br>- 失点パターン: 卓球用語を含む具体的な記述 |

**卓球用語チェックリスト**:
- ドライブ、フォアハンド、バックハンド、サーブ、レシーブ
- フットワーク、ブロック、カウンター、チキータ、フリック
- ツッツキ、ロビング、スマッシュ、カット

#### TC-L2-02: 戦略シートの品質

| 項目 | 内容 |
|:---|:---|
| **目的** | 戦略シートが試合で使える内容か確認 |
| **検証項目** | 1. サーブ戦略（序盤/中盤/終盤）<br>2. レシーブ戦略（短い/長いサーブ対応）<br>3. ラリー戦略（攻撃時/守備時） |
| **合格基準** | - 各戦略に具体的な推奨行動が記載<br>- 分析結果と整合性がある<br>- A4一枚程度の分量（3000文字以内） |

#### TC-L2-03: 練習計画の品質

| 項目 | 内容 |
|:---|:---|
| **目的** | 練習計画が実行可能な内容か確認 |
| **検証項目** | 1. 優先課題（3つ、優先度付き）<br>2. 週間計画（5日分）<br>3. ドリル（3つ以上、具体的な方法） |
| **合格基準** | - 優先課題が分析結果の改善点と対応<br>- 各日の練習時間が明記<br>- ドリルに目的・方法・時間・回数が記載 |

---

### 2.3 L3: 実用性確認テスト（UAT）

#### TC-L3-01: 選手による評価

| 項目 | 内容 |
|:---|:---|
| **目的** | 浅見選手が分析結果を見て「自分のプレーを正しく分析している」と感じるか |
| **評価者** | 浅見選手本人 |
| **評価項目** | 1. 利き手・グリップは正しいか<br>2. プレースタイルの説明は妥当か<br>3. 強み・弱みの指摘は正しいか<br>4. 得点/失点パターンは実感と合っているか |
| **合格基準** | 5段階評価で平均3以上 |

#### TC-L3-02: 戦略の実用性評価

| 項目 | 内容 |
|:---|:---|
| **目的** | 戦略シートが試合前に読んで理解・活用できるか |
| **評価者** | 浅見選手またはコーチ |
| **評価項目** | 1. 読んで理解できるか<br>2. 試合で実行できる内容か<br>3. 自分の強みを活かした戦略か |
| **合格基準** | 5段階評価で平均3以上 |

#### TC-L3-03: 練習計画の実行可能性評価

| 項目 | 内容 |
|:---|:---|
| **目的** | 練習計画が実際に実行可能か |
| **評価者** | 浅見選手またはコーチ |
| **評価項目** | 1. 練習時間は現実的か<br>2. ドリルは実行可能か<br>3. 課題改善に効果がありそうか |
| **合格基準** | 5段階評価で平均3以上 |

---

## 3. テスト実行結果

### 3.1 L1: 動作確認テスト結果

| テストID | 実行日 | 結果 | 備考 |
|:---|:---|:---:|:---|
| TC-L1-01 | 2026/01/03 | ✅ PASS | 処理時間約4分、JSONパース成功 |
| TC-L1-02 | 2026/01/03 | ✅ PASS | JSONパース成功 |
| TC-L1-03 | 2026/01/03 | ✅ PASS | JSONパース成功 |

### 3.2 L2: 品質確認テスト結果

| テストID | 実行日 | 結果 | 備考 |
|:---|:---|:---:|:---|
| TC-L2-01 | 2026/01/03 | ✅ PASS | 全項目で卓球用語を含む具体的記述 |
| TC-L2-02 | 2026/01/03 | ✅ PASS | 分析結果と整合性あり |
| TC-L2-03 | 2026/01/03 | ✅ PASS | 5日分の計画、ドリル3件 |

### 3.3 L3: 実用性確認テスト結果

| テストID | 実行日 | 結果 | 備考 |
|:---|:---|:---:|:---|
| TC-L3-01 | - | ⏳ 待機 | ユーザー評価待ち |
| TC-L3-02 | - | ⏳ 待機 | ユーザー評価待ち |
| TC-L3-03 | - | ⏳ 待機 | ユーザー評価待ち |

---

## 4. エビデンス

### 4.1 TC-L1-01: 動画分析の実行エビデンス

**入力**:
```
ファイル: data/asami_match.mp4
サイズ: 56MB
長さ: 221秒
選手: 浅見江里佳
所属: 文化学園大学杉並
```

**実行ログ**:
```
=== 分析実行 ===
動画を分析中: data/asami_match.mp4
選手: 浅見江里佳 (文化学園大学杉並)
フレームを抽出中...
  8 フレームを抽出
APIで分析中...
```

**出力（抜粋）**:
```json
{
  "基本情報": {
    "選手名": "浅見江里佳",
    "所属": "文化学園大学杉並",
    "利き手": "右",
    "グリップ": "シェークハンド",
    "プレースタイル": "ドライブ主戦型（フォア主戦）"
  },
  "技術分析": {
    "フォアハンド": {"評価": "4", "特徴": "体全体を使ったダイナミックなスイング..."},
    "バックハンド": {"評価": "3", "特徴": "ブロックや繋ぎの技術は安定..."},
    ...
  }
}
```

**結果**: ✅ PASS

---

### 4.2 TC-L2-01: 分析結果の品質エビデンス

**検証項目と結果**:

| 項目 | 期待 | 実際 | 判定 |
|:---|:---|:---|:---:|
| 利き手 | 右/左 | 右 | ✅ |
| グリップ | シェイク/ペン | シェークハンド | ✅ |
| フォア評価 | 1-5 | 4 | ✅ |
| バック評価 | 1-5 | 3 | ✅ |
| サーブ評価 | 1-5 | 3 | ✅ |
| レシーブ評価 | 1-5 | 3 | ✅ |
| フットワーク評価 | 1-5 | 4 | ✅ |
| 得点パターン数 | ≥3 | 3 | ✅ |
| 失点パターン数 | ≥3 | 3 | ✅ |

**卓球用語の検出**:
- ドライブ: ✅ 検出
- フォアハンド: ✅ 検出
- バックハンド: ✅ 検出
- フットワーク: ✅ 検出
- ブロック: ✅ 検出
- カウンター: ✅ 検出

**結果**: ✅ PASS

---

## 5. 改訂履歴

| バージョン | 日付 | 変更内容 |
|:---|:---|:---|
| 1.0 | 2026/01/03 | 初版（形式検証のみ） |
| 2.0 | 2026/01/03 | 実動作検証に基づく全面改訂 |
