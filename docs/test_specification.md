# テスト仕様書 v1.0

**ドキュメントID**: QA-05  
**バージョン**: 1.0  
**作成日**: 2026年1月4日  
**作成者**: Manus AI (PM)  
**ステータス**: 作成中

---

## 1. 目的

本ドキュメントは、各テストにおいて「何を確認するか」「どのような状態であれば合格か」を明確に定義する。単に出力が存在するかではなく、**品質**と**活用可能性**の観点から合格基準を設定する。

---

## 2. テスト仕様

### 2.1. 単体テスト仕様

#### UT-01: 分析プロンプトの品質検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | UT-01 |
| **対象要件** | FA-01〜FA-08 |
| **テスト目的** | 分析プロンプトが業務要件を満たす具体的な指示を含み、LLMが適切な分析を行えるか |
| **入力** | `ANALYSIS_PROMPT`, `OPPONENT_ANALYSIS_PROMPT` |
| **確認内容** | |
| 1. 構造の妥当性 | プロンプトが明確なセクション構造を持つ |
| 2. 指示の具体性 | 各要件に対応する具体的な分析指示が含まれる |
| 3. 出力形式の指定 | JSON形式での出力指示が明確に記載されている |
| 4. 卓球用語の正確性 | 使用されている卓球用語が正確である |
| **合格基準** | |
| - | FA-01: 「得点パターン」「失点パターン」の分析指示があり、「3つ以上」等の具体的な数値指定がある |
| - | FA-02: 「フォアハンド」「バックハンド」「サーブ」「レシーブ」の技術名が明記されている |
| - | FA-03: サーブの「種類」「コース」「回転」、レシーブの「展開パターン」の分析指示がある |
| - | FA-04: 「スイング軌道」「打点」「体の使い方」の分析指示がある |
| - | FA-05: 「移動」「フットワーク」「ポジショニング」の分析指示がある |
| **不合格条件** | 上記のいずれかが欠けている場合 |

---

#### UT-02: 戦略プロンプトの品質検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | UT-02 |
| **対象要件** | FS-01〜FS-04 |
| **テスト目的** | 戦略プロンプトが対戦相手別の具体的な戦略を生成できる指示を含むか |
| **入力** | `STRATEGY_PROMPT` |
| **確認内容** | |
| 1. 戦略シートの構造 | サーブ戦略、レシーブ戦略、ラリー戦略の3セクションが指示されている |
| 2. 場面別の指示 | 「序盤」「中盤」「終盤」等の場面別戦略の指示がある |
| 3. 具体性の要求 | 「コース」「回転」「タイミング」等の具体的な要素が要求されている |
| **合格基準** | |
| - | FS-01: 「戦略シート」「A4一枚」等の出力形式指示がある |
| - | FS-02: サーブの「種類」「コース」の提案指示がある |
| - | FS-03: レシーブの「安全」「攻撃的」の使い分け指示がある |
| - | FS-04: 「攻撃コース」「ラリー展開」の提案指示がある |
| **不合格条件** | 戦略が抽象的な指示のみで具体性がない場合 |

---

#### UT-03: 練習計画プロンプトの品質検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | UT-03 |
| **対象要件** | FP-01〜FP-03 |
| **テスト目的** | 練習計画プロンプトが実行可能な練習メニューを生成できる指示を含むか |
| **入力** | `PRACTICE_PROMPT` |
| **確認内容** | |
| 1. 優先順位の指示 | 課題に優先順位を付ける指示がある |
| 2. 練習メニューの具体性 | 「多球練習」「システム練習」等の具体的な練習形式が指示されている |
| 3. 時間・回数の指定 | 練習時間や回数の目安を含める指示がある |
| **合格基準** | |
| - | FP-01: 「優先順位」「重要度」「インパクト」等の順位付け指示がある |
| - | FP-02: 「多球練習」「システム練習」「ドリル」等の練習形式が明記されている |
| - | FP-03: 「素振り」「フォーム修正」等の具体的なドリル指示がある |
| **不合格条件** | 練習メニューが「練習する」等の抽象的な指示のみの場合 |

---

### 2.2. 統合テスト仕様

#### IT-01: 分析出力の品質検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | IT-01 |
| **対象要件** | FA-01〜FA-05 |
| **テスト目的** | 分析結果が業務要件を満たす品質と活用可能性を持つか |
| **入力** | テスト用動画ファイル（または模擬入力データ） |
| **確認内容** | |
| 1. 得点パターンの品質 | 卓球の得点パターンとして妥当な内容か |
| 2. 技術分析の網羅性 | 全ての主要技術（フォア、バック、サーブ、レシーブ）が分析されているか |
| 3. 数値データの妥当性 | 評価スコア（1-5等）が適切な範囲内か |
| 4. 改善点の具体性 | 改善点が具体的で実行可能な内容か |
| **合格基準** | |
| - | 得点パターン: 3件以上、各10文字以上、卓球用語を含む |
| - | 失点パターン: 3件以上、各10文字以上、卓球用語を含む |
| - | 技術分析: 4技術以上、各技術に評価スコアと改善点を含む |
| - | 改善点: 「〜を〜する」形式の具体的なアクションを含む |
| **不合格条件** | |
| - | 得点/失点パターンが2件以下 |
| - | 内容が「良い」「悪い」等の抽象的な評価のみ |
| - | 卓球と無関係な内容が含まれる |

---

#### IT-02: 戦略出力の品質検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | IT-02 |
| **対象要件** | FS-01〜FS-04 |
| **テスト目的** | 戦略シートが実際の試合で活用可能な品質を持つか |
| **入力** | 分析結果JSON |
| **確認内容** | |
| 1. サーブ戦略の具体性 | サーブの種類、コース、狙いが明記されているか |
| 2. レシーブ戦略の具体性 | 相手サーブ別の対応が明記されているか |
| 3. ラリー戦略の具体性 | 攻撃パターン、守備パターンが明記されているか |
| 4. 場面別の対応 | 序盤、中盤、終盤、接戦時等の場面別戦略があるか |
| **合格基準** | |
| - | サーブ戦略: 3種類以上のサーブパターンと狙いが記載 |
| - | レシーブ戦略: 短いサーブ、長いサーブへの対応が記載 |
| - | ラリー戦略: 攻撃時、守備時の展開が記載 |
| - | 全体: 選手名、対戦相手名が正しく反映されている |
| **不合格条件** | |
| - | 戦略が「攻める」「守る」等の抽象的な内容のみ |
| - | 具体的なコースや技術名が含まれない |

---

#### IT-03: 練習計画出力の品質検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | IT-03 |
| **対象要件** | FP-01〜FP-03 |
| **テスト目的** | 練習計画が実際に実行可能な品質を持つか |
| **入力** | 分析結果JSON |
| **確認内容** | |
| 1. 課題の優先順位 | 課題に明確な優先順位が付けられているか |
| 2. 練習メニューの実行可能性 | 具体的な練習内容、時間、回数が含まれているか |
| 3. 課題との対応 | 練習メニューが特定された課題に対応しているか |
| **合格基準** | |
| - | 優先課題: 3件以上、優先度（高/中/低または数値）が明記 |
| - | 練習メニュー: 各課題に対して1つ以上の具体的な練習方法 |
| - | 練習内容: 「多球練習で〜」「システム練習で〜」等の具体的な形式 |
| - | 時間目安: 「10分」「20球」等の具体的な数値を含む |
| **不合格条件** | |
| - | 「練習する」「改善する」等の抽象的な内容のみ |
| - | 時間や回数の目安がない |

---

### 2.3. E2Eテスト仕様

#### E2E-01: 分析フロー完全検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | E2E-01 |
| **対象要件** | FA-01〜FA-08, NF-02 |
| **テスト目的** | 動画入力から分析結果出力までの全フローが正常に動作し、出力が活用可能か |
| **入力** | テスト用動画ファイル |
| **確認内容** | |
| 1. フロー完了 | エラーなく分析が完了する |
| 2. 出力形式 | JSON形式で出力される |
| 3. 内容の妥当性 | IT-01の合格基準を全て満たす |
| 4. 可読性 | 専門知識がなくても理解できる表現（NF-02） |
| **合格基準** | |
| - | 分析が正常に完了し、JSONファイルが出力される |
| - | IT-01の全ての合格基準を満たす |
| - | 出力に専門用語の説明または平易な表現が含まれる |
| **不合格条件** | 処理中にエラーが発生、またはIT-01の不合格条件に該当 |

---

#### E2E-02: 戦略生成フロー完全検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | E2E-02 |
| **対象要件** | FS-01〜FS-04, NF-02 |
| **テスト目的** | 分析結果から戦略シート生成までの全フローが正常に動作し、試合で活用可能か |
| **入力** | 分析結果JSON、対戦相手情報 |
| **確認内容** | |
| 1. フロー完了 | エラーなく戦略生成が完了する |
| 2. 出力形式 | 構造化された戦略シートが出力される |
| 3. 内容の妥当性 | IT-02の合格基準を全て満たす |
| 4. 実用性 | 試合前に読んで理解・実行できる内容 |
| **合格基準** | |
| - | 戦略生成が正常に完了する |
| - | IT-02の全ての合格基準を満たす |
| - | A4一枚程度（2000文字以内）に収まる |
| **不合格条件** | 処理中にエラーが発生、またはIT-02の不合格条件に該当 |

---

#### E2E-03: 練習計画生成フロー完全検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | E2E-03 |
| **対象要件** | FP-01〜FP-03, NF-02 |
| **テスト目的** | 分析結果から練習計画生成までの全フローが正常に動作し、練習で活用可能か |
| **入力** | 分析結果JSON |
| **確認内容** | |
| 1. フロー完了 | エラーなく練習計画生成が完了する |
| 2. 出力形式 | 構造化された練習計画が出力される |
| 3. 内容の妥当性 | IT-03の合格基準を全て満たす |
| 4. 実用性 | 練習時に参照して実行できる内容 |
| **合格基準** | |
| - | 練習計画生成が正常に完了する |
| - | IT-03の全ての合格基準を満たす |
| - | 1週間分の練習計画として実行可能な分量 |
| **不合格条件** | 処理中にエラーが発生、またはIT-03の不合格条件に該当 |

---

#### E2E-04: レポート生成フロー完全検証

| 項目 | 内容 |
|:---|:---|
| **テストID** | E2E-04 |
| **対象要件** | FR-01, NF-02 |
| **テスト目的** | 分析結果からレポート生成までの全フローが正常に動作し、振り返りに活用可能か |
| **入力** | 分析結果JSON |
| **確認内容** | |
| 1. フロー完了 | エラーなくレポート生成が完了する |
| 2. 出力形式 | Markdown形式で出力される |
| 3. 必須セクション | 基本情報、技術分析、戦術分析、総合評価が含まれる |
| 4. 可読性 | 選手・コーチが読んで理解できる |
| **合格基準** | |
| - | レポート生成が正常に完了する |
| - | 選手名、所属、分析日が正しく記載されている |
| - | 4つの必須セクションが全て含まれる |
| - | 500文字以上の内容がある |
| **不合格条件** | 必須セクションが欠けている、または内容が空 |

---

## 3. 品質基準の定義

### 3.1. 卓球用語の正確性

以下の用語が正しく使用されていること：

| カテゴリ | 正しい用語例 |
|:---|:---|
| 技術名 | フォアハンドドライブ、バックハンドドライブ、チキータ、フリック、ツッツキ、カット、スマッシュ |
| サーブ | ショートサーブ、ロングサーブ、横回転サーブ、下回転サーブ、YGサーブ |
| コース | フォア側、バック側、ミドル、クロス、ストレート |
| 展開 | 3球目攻撃、4球目攻撃、台上処理、ラリー戦 |

### 3.2. 具体性の基準

| レベル | 説明 | 例 |
|:---|:---|:---|
| 不合格 | 抽象的 | 「攻める」「守る」「練習する」 |
| 合格 | 具体的 | 「フォア前にショートサーブを出し、3球目をバッククロスにドライブ」 |

### 3.3. 活用可能性の基準

| 観点 | 基準 |
|:---|:---|
| 理解可能性 | 専門知識がなくても理解できる |
| 実行可能性 | 読んだ後に具体的なアクションが取れる |
| 参照可能性 | 試合中・練習中に参照して活用できる |

---

## 4. 変更履歴

| 日付 | バージョン | 変更内容 | 作成者 |
|:---|:---|:---|:---|
| 2026-01-04 | 1.0 | 初版作成 | PM |
