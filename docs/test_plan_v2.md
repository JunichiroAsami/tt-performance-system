# テスト計画書 v2.0

**プロジェクト名**: AI主導型 卓球パフォーマンス最大化システム  
**作成日**: 2026年1月3日  
**バージョン**: 2.0（実動作検証済み）

---

## 1. テスト計画概要

### 1.1 目的

本テスト計画は、卓球パフォーマンス分析システムが**実際に動作し、実用的な価値を提供する**ことを検証するために策定する。

### 1.2 スコープ

| 対象 | 内容 |
|:---|:---|
| テスト対象 | VideoAnalyzerモジュール |
| テスト範囲 | 動画分析、戦略生成、練習計画生成 |
| テスト環境 | Ubuntu 22.04, Python 3.11, Gemini API |

---

## 2. ゲート設計

### 2.1 ゲート構成

```
[開発] → [Gate 1] → [Gate 2] → [Gate 3] → [リリース]
          動作確認    品質確認    実用性確認
```

### 2.2 各ゲートの定義

#### Gate 1: 動作確認ゲート

| 項目 | 内容 |
|:---|:---|
| **目的** | システムがエラーなく動作することを確認 |
| **通過条件** | 全L1テストがPASS |
| **ブロッカー** | 1つでもFAILがあれば通過不可 |
| **担当** | 開発者 |

**テストケース**:
- TC-L1-01: 動画分析の実行
- TC-L1-02: 戦略生成の実行
- TC-L1-03: 練習計画生成の実行

#### Gate 2: 品質確認ゲート

| 項目 | 内容 |
|:---|:---|
| **目的** | 出力内容が専門的に妥当であることを確認 |
| **通過条件** | 全L2テストがPASS |
| **ブロッカー** | 1つでもFAILがあれば通過不可 |
| **担当** | 開発者 |

**テストケース**:
- TC-L2-01: 分析結果の品質
- TC-L2-02: 戦略シートの品質
- TC-L2-03: 練習計画の品質

#### Gate 3: 実用性確認ゲート（UAT）

| 項目 | 内容 |
|:---|:---|
| **目的** | ユーザーが実際に活用できることを確認 |
| **通過条件** | 全L3テストで平均評価3以上 |
| **ブロッカー** | 平均評価2以下の項目があれば通過不可 |
| **担当** | ユーザー（浅見選手/コーチ） |

**テストケース**:
- TC-L3-01: 選手による評価
- TC-L3-02: 戦略の実用性評価
- TC-L3-03: 練習計画の実行可能性評価

---

## 3. テスト実行計画

### 3.1 スケジュール

| フェーズ | 期間 | 内容 |
|:---|:---|:---|
| Gate 1 | 2026/01/03 | 動作確認テスト実行 |
| Gate 2 | 2026/01/03 | 品質確認テスト実行 |
| Gate 3 | 2026/01/03〜 | ユーザー評価待ち |

### 3.2 現在のステータス

```
[開発完了] ──▶ [Gate 1] ──▶ [Gate 2] ──▶ [Gate 3]
               ✅ 通過      ✅ 通過      ⏳ 待機
```

---

## 4. テストエビデンス

### 4.1 Gate 1 エビデンス

#### TC-L1-01: 動画分析の実行

**入力**:
```
ファイル: data/asami_match.mp4
サイズ: 58,204,841 bytes (56MB)
形式: H.264/MP4
長さ: 221.4秒
解像度: 1280x720
```

**実行コマンド**:
```bash
cd ~/tt-performance-system/src/analysis
python3 video_analyzer.py ../../data/asami_match.mp4
```

**実行結果**:
```
=== 動画分析を開始 ===
動画を分析中: ../../data/asami_match.mp4
選手: 浅見江里佳 (文化学園大学杉並)
フレームを抽出中...
  8 フレームを抽出
APIで分析中...

=== 分析結果 ===
{
  "基本情報": {
    "選手名": "浅見江里佳",
    "所属": "文化学園大学杉並",
    "利き手": "右",
    "グリップ": "シェークハンド",
    "プレースタイル": "ドライブ主戦型（フォア主戦）"
  },
  ...
}
```

**判定**: ✅ PASS
- エラーなく完了
- 処理時間: 約4分
- JSONパース: 成功

---

#### TC-L1-02: 戦略生成の実行

**入力**: TC-L1-01の分析結果

**実行結果**:
```
=== 戦略生成 ===
{
  "サーブ戦略": {
    "序盤（1-3点目）": {
      "推奨サーブ": "下回転（短め）またはナックル（短め）",
      "狙い": "相手のレシーブミスを誘うのではなく..."
    },
    ...
  }
}
```

**判定**: ✅ PASS

---

#### TC-L1-03: 練習計画生成の実行

**入力**: TC-L1-01の分析結果

**実行結果**:
```
=== 練習計画生成 ===
{
  "優先課題": [
    {
      "順位": 1,
      "課題": "バックハンドの攻撃力強化...",
      "理由": "...",
      "優先度": "高"
    },
    ...
  ],
  "週間練習計画": {...},
  "ドリル": [...]
}
```

**判定**: ✅ PASS

---

### 4.2 Gate 2 エビデンス

#### TC-L2-01: 分析結果の品質

**検証結果**:

| チェック項目 | 期待値 | 実際の値 | 判定 |
|:---|:---|:---|:---:|
| 利き手 | 右/左 | 右 | ✅ |
| グリップ | シェイク/ペン | シェークハンド | ✅ |
| プレースタイル | 具体的記述 | ドライブ主戦型（フォア主戦） | ✅ |
| フォア評価 | 1-5の数値 | 4 | ✅ |
| バック評価 | 1-5の数値 | 3 | ✅ |
| サーブ評価 | 1-5の数値 | 3 | ✅ |
| レシーブ評価 | 1-5の数値 | 3 | ✅ |
| フットワーク評価 | 1-5の数値 | 4 | ✅ |
| 得点パターン | 3つ以上 | 3つ | ✅ |
| 失点パターン | 3つ以上 | 3つ | ✅ |

**卓球用語検出**:
```
検出された用語:
- ドライブ ✅
- フォアハンド ✅
- バックハンド ✅
- サーブ ✅
- レシーブ ✅
- フットワーク ✅
- ブロック ✅
- カウンター ✅
- チキータ ✅
- フリック ✅
- ツッツキ ✅
```

**判定**: ✅ PASS

---

#### TC-L2-02: 戦略シートの品質

**検証結果**:

| チェック項目 | 期待 | 実際 | 判定 |
|:---|:---|:---|:---:|
| サーブ戦略（序盤） | 具体的推奨 | 下回転（短め）またはナックル（短め） | ✅ |
| サーブ戦略（中盤） | 具体的推奨 | 下回転と時折のロングサーブ | ✅ |
| サーブ戦略（終盤） | 具体的推奨 | 横回転とナックルの組み合わせ | ✅ |
| レシーブ戦略（短い） | 具体的推奨 | ツッツキまたはチキータ | ✅ |
| レシーブ戦略（長い） | 具体的推奨 | フォアドライブ（強打） | ✅ |
| ラリー戦略（攻撃） | 具体的推奨 | バック側、フォア側サイドライン | ✅ |
| ラリー戦略（守備） | 具体的推奨 | 低く安定したブロック | ✅ |
| キーポイント | 3つ以上 | 3つ | ✅ |
| 分量 | 3000文字以内 | 約2500文字 | ✅ |

**判定**: ✅ PASS

---

#### TC-L2-03: 練習計画の品質

**検証結果**:

| チェック項目 | 期待 | 実際 | 判定 |
|:---|:---|:---|:---:|
| 優先課題数 | 3つ | 3つ | ✅ |
| 優先度付き | あり | 高/高/中 | ✅ |
| 週間計画 | 5日分 | 5日分（月〜金） | ✅ |
| 各日のテーマ | あり | あり | ✅ |
| 各日の時間 | あり | 1.5〜2.5時間 | ✅ |
| ドリル数 | 3つ以上 | 3つ | ✅ |
| ドリルの目的 | あり | あり | ✅ |
| ドリルの方法 | あり | あり | ✅ |
| ドリルの時間 | あり | 15〜20分 | ✅ |
| ドリルの回数 | あり | 3セット | ✅ |

**判定**: ✅ PASS

---

### 4.3 Gate 3 エビデンス（UAT）

**ステータス**: ⏳ ユーザー評価待ち

**評価フォーム**:

#### TC-L3-01: 選手による評価

| 評価項目 | 1 | 2 | 3 | 4 | 5 |
|:---|:---:|:---:|:---:|:---:|:---:|
| 利き手・グリップは正しいか | ○ | ○ | ○ | ○ | ○ |
| プレースタイルの説明は妥当か | ○ | ○ | ○ | ○ | ○ |
| 強み・弱みの指摘は正しいか | ○ | ○ | ○ | ○ | ○ |
| 得点パターンは実感と合っているか | ○ | ○ | ○ | ○ | ○ |
| 失点パターンは実感と合っているか | ○ | ○ | ○ | ○ | ○ |

#### TC-L3-02: 戦略の実用性評価

| 評価項目 | 1 | 2 | 3 | 4 | 5 |
|:---|:---:|:---:|:---:|:---:|:---:|
| 読んで理解できるか | ○ | ○ | ○ | ○ | ○ |
| 試合で実行できる内容か | ○ | ○ | ○ | ○ | ○ |
| 自分の強みを活かした戦略か | ○ | ○ | ○ | ○ | ○ |

#### TC-L3-03: 練習計画の実行可能性評価

| 評価項目 | 1 | 2 | 3 | 4 | 5 |
|:---|:---:|:---:|:---:|:---:|:---:|
| 練習時間は現実的か | ○ | ○ | ○ | ○ | ○ |
| ドリルは実行可能か | ○ | ○ | ○ | ○ | ○ |
| 課題改善に効果がありそうか | ○ | ○ | ○ | ○ | ○ |

---

## 5. 改訂履歴

| バージョン | 日付 | 変更内容 |
|:---|:---|:---|
| 1.0 | 2026/01/03 | 初版（形式検証のみ） |
| 2.0 | 2026/01/03 | 実動作検証に基づく全面改訂 |
